---
title: 百度地图集成
date: 2018-06-08 12:00:47
tags:
---
组件地址：https://github.com/lovebing/react-native-baidu-map

具体细节可查看：百度地图LBS文档 (hiracer/lesu888888)

http://lbsyun.baidu.com/index.php?title=iossdk/guide/buildproject



第一步：在package.json文件目录下 npm install react-native-baidu-map --save

第二步：手动link:

1. Project navigator->Libraries->Add Files to 选择 react-native-baidu-map/ios/RCTBaiduMap.xcodeproj

2. Project navigator->Build Phases->Link Binary With Libraries 加入 libRCTBaiduMap.a



第三步：添加依赖库：

1. Project navigator->Build Settings->Search Paths， Framework search paths 添加 $(SRCROOT)/../node_modules/react-native-baidu-map/ios/lib (选择recursive)



2. Project navigator->Build Settings->Search Paths， Header search paths 添加 $(SRCROOT)/../node_modules/react-native-baidu-map/ios/lib (选择recursive)



3. Project navigator->Build Settings->Search Paths， Header search paths 添加 $(SRCROOT)/../node_modules/react-native-baidu-map/ios/RCTBaiduMap (选择recursive)



4. Project navigator->Build Settings->Search Paths， Library search paths 添加 $(SRCROOT)/../node_modules/react-native-baidu-map/ios/lib (选择recursive)



5. Project navigator->Build Phases->Link Binary With Libraries, 添加依赖, node_modules/react-native-baidu-map/ios/lib/下的全部BaiduMapAPI_**framework(暂时不用：和thiridlibs下的全部.a文件),， 以及CoreLocation.framework和QuartzCore.framework、OpenGLES.framework、SystemConfiguration.framework、CoreGraphics.framework、Security.framework、libsqlite3.0.tbd（xcode7以前为 libsqlite3.0.dylib）、CoreTelephony.framework 、libstdc++.6.0.9.tbd（xcode7以前为libstdc++.6.0.9.dylib）、CoreTelephony.framework

注：在 TARGETS->Build Phases-> Link Binary With Libaries中点击“+”按钮，在弹出的窗口中点击“Add Other”按钮，然后添加framework

注:  静态库中采用Objective-C++实现，因此需要您保证您工程中至少有一个.mm后缀的源文件(您可以将任意一个.m后缀的文件改名为.mm)，或者在工程属性中指定编译方式，即在Xcode的Project -> Edit Active Target -> Build Setting 中找到 Compile Sources As，并将其设置为"Objective-C++"    将AppDelegate.m改为AppDelegate.mm



第四步: 引入mapapi.bundle资源文件

如果使用了基础地图功能，需要添加该资源，否则地图不能正常显示mapapi.bundle中存储了定位、默认大头针标注View及路线关键点的资源图片，还存储了矢量地图绘制必需的资源文件。如果您不需要使用内置的图片显示功能，则可以删除bundle文件中的image文件夹。您也可以根据具体需求任意替换或删除该bundle中image文件夹的图片文件。

方法：选中工程名，在右键菜单中选择Add Files to “工程名”…，从BaiduMapAPI_Map.framework||Resources文件中选择mapapi.bundle文件，并勾选“Copy items if needed”复选框，单击“Add”按钮，将资源文件添加到工程中。



第五步：环境配置

在TARGETS->Build Settings->Other Linker Flags 中添加-ObjC。



第六步：AppDelegate.m  增加以下代码

#import "RCTBaiduMapViewManager.h"
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{[RCTBaiduMapViewManager initSDK:@"api key"];}

//api key 为hiracer申请的key:GtELbe1jDV64jzxqfQR31aw6KUkmN0sB
